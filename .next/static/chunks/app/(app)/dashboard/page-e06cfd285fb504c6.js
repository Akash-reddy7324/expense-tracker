(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[536],{1307:(e,t,a)=>{Promise.resolve().then(a.bind(a,7180))},3761:(e,t,a)=>{"use strict";a.d(t,{As:()=>r,Wz:()=>o,eY:()=>i,k5:()=>s});var n=a(8096),l=a(9708);async function s(e,t){return(await (0,l.gS)((0,l.rJ)(n.db,"expenses",e,"items"),{userId:e,...t,createdAt:(0,l.O5)(),updatedAt:(0,l.O5)()})).id}async function r(e,t,a){let s=(0,l.P)((0,l.rJ)(n.db,"expenses",e,"items"),(0,l._M)("date",">=",t),(0,l._M)("date","<=",a),(0,l.My)("date","desc"));return(await (0,l.GG)(s)).docs.map(e=>({id:e.id,...e.data()}))}async function o(e,t){await (0,l.kd)((0,l.H9)(n.db,"expenses",e,"items",t))}async function i(e,t,a){await (0,l.mZ)((0,l.H9)(n.db,"expenses",e,"items",t),{...a,updatedAt:(0,l.O5)()})}},7180:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>b});var n=a(5155),l=a(2115),s=a(5653),r=a(3761),o=a(8096);let i=s.z.object({date:s.z.string().min(1),amount:s.z.coerce.number().positive(),category:s.z.string().min(1),note:s.z.string().optional(),paymentMethod:s.z.enum(["cash","upi","card","bank","other"]).optional()});function d(e){var t;let{onAdded:a}=e,[s,d]=(0,l.useState)({date:new Date().toISOString().slice(0,10),amount:"",category:"Food",note:"",paymentMethod:"upi"}),[c,u]=(0,l.useState)(!1),p=null==(t=o.j.currentUser)?void 0:t.uid;async function m(e){e.preventDefault();let t=i.safeParse({...s,amount:Number(s.amount)});if(!t.success||!p)return alert("Check inputs or login again.");u(!0);try{await (0,r.k5)(p,t.data),d({...s,amount:"",note:""}),null==a||a()}finally{u(!1)}}return(0,n.jsxs)("form",{onSubmit:m,className:"grid gap-3 md:grid-cols-5",children:[(0,n.jsx)("input",{type:"date",value:s.date,onChange:e=>d(t=>({...t,date:e.target.value}))}),(0,n.jsx)("input",{inputMode:"decimal",placeholder:"Amount",value:s.amount,onChange:e=>d(t=>({...t,amount:e.target.value}))}),(0,n.jsx)("select",{value:s.category,onChange:e=>d(t=>({...t,category:e.target.value})),children:["Food","Travel","Shopping","Bills","Health","Entertainment","Education","Other"].map(e=>(0,n.jsx)("option",{value:e,children:e},e))}),(0,n.jsx)("input",{placeholder:"Note",value:s.note,onChange:e=>d(t=>({...t,note:e.target.value}))}),(0,n.jsx)("select",{value:s.paymentMethod,onChange:e=>d(t=>({...t,paymentMethod:e.target.value})),children:["cash","upi","card","bank","other"].map(e=>(0,n.jsx)("option",{value:e,children:e},e))}),(0,n.jsx)("button",{disabled:c,className:"btn-primary md:col-span-5",children:c?"Saving…":"Add Expense"})]})}var c=a(5938),u=a(9056);function p(e){var t;let{items:a,refresh:s}=e,i=null==(t=o.j.currentUser)?void 0:t.uid,[d,p]=(0,l.useState)(null),[m,h]=(0,l.useState)({});return i?(0,n.jsxs)("ul",{className:"space-y-3",children:[a.map(e=>{var t,a,l,o,x,g,f;let v=d===e.id;return(0,n.jsx)("li",{className:"card",children:v?(0,n.jsxs)("form",{onSubmit:async t=>{t.preventDefault();try{await (0,r.eY)(i,e.id,m),p(null),h({}),s()}catch(e){alert("Failed to update expense: "+e.message)}},className:"flex flex-col md:flex-row gap-2 w-full",children:[(0,n.jsx)("input",{type:"date",value:null!=(t=m.date)?t:e.date,onChange:e=>h(t=>({...t,date:e.target.value}))}),(0,n.jsx)("input",{type:"number",value:null!=(a=m.amount)?a:e.amount,onChange:e=>h(t=>({...t,amount:Number(e.target.value)}))}),(0,n.jsx)("select",{value:null!=(l=m.category)?l:e.category,onChange:e=>h(t=>({...t,category:e.target.value})),children:["Food","Travel","Shopping","Bills","Health","Entertainment","Education","Other"].map(e=>(0,n.jsx)("option",{value:e,children:e},e))}),(0,n.jsx)("input",{type:"text",placeholder:"Note",value:null!=(x=null!=(o=m.note)?o:e.note)?x:"",onChange:e=>h(t=>({...t,note:e.target.value}))}),(0,n.jsx)("select",{value:null!=(f=null!=(g=m.paymentMethod)?g:e.paymentMethod)?f:"cash",onChange:e=>h(t=>({...t,paymentMethod:e.target.value})),children:["cash","upi","card","bank","other"].map(e=>(0,n.jsx)("option",{value:e,children:e},e))}),(0,n.jsxs)("div",{className:"flex gap-2",children:[(0,n.jsx)("button",{type:"submit",className:"btn-primary px-3 py-1",children:"Save"}),(0,n.jsx)("button",{type:"button",onClick:()=>p(null),className:"btn-secondary px-3 py-1",children:"Cancel"})]})]}):(0,n.jsxs)("div",{className:"flex items-center justify-between w-full",children:[(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"font-medium text-white",children:["₹",e.amount.toFixed(2)," — ",e.category]}),(0,n.jsxs)("div",{className:"text-gray-400 text-xs",children:[(0,c.GP)((0,u.H)(e.date),"dd MMM yyyy")," \xb7 ",e.note||"—"," \xb7 ",e.paymentMethod||"—"]})]}),(0,n.jsxs)("div",{className:"flex gap-3",children:[(0,n.jsx)("button",{onClick:()=>{p(e.id),h(e)},className:"text-blue-400 hover:underline",children:"Edit"}),(0,n.jsx)("button",{onClick:async()=>{try{await (0,r.Wz)(i,e.id),s()}catch(e){alert("Failed to delete expense: "+e.message)}},className:"text-red-400 hover:underline",children:"Delete"})]})]})},e.id)}),0===a.length&&(0,n.jsx)("li",{className:"text-gray-500",children:"No expenses yet."})]}):(0,n.jsx)("p",{className:"p-3 text-red-400",children:"Please login to see expenses."})}function m(e){let{total:t,avgPerDay:a,count:l}=e,s=[{label:"This Month",value:"₹".concat(t.toFixed(2))},{label:"Avg / Day",value:"₹".concat(a.toFixed(2))},{label:"Entries",value:"".concat(l)}];return(0,n.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:s.map(e=>(0,n.jsxs)("div",{className:"card text-center",children:[(0,n.jsx)("div",{className:"text-sm text-gray-400",children:e.label}),(0,n.jsx)("div",{className:"text-2xl font-bold text-white mt-1",children:e.value})]},e.label))})}var h=a(231),x=a(9894);let g=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date;return{from:(0,c.GP)((0,h.w)(e),"yyyy-MM-dd"),to:(0,c.GP)((0,x.p)(e),"yyyy-MM-dd")}};var f=a(877),v=a(1607);function y(e){let{byCategory:t}=e,a=Object.keys(t),l=Object.values(t),s=l.reduce((e,t)=>e+t,0),r={Food:"#d62728",Travel:"#1f77b4",Shopping:"#ff7f0e",Bills:"#2ca02c",Health:"#9467bd",Entertainment:"#17becf",Education:"#bcbd22",Other:"#7f7f7f"},o={labels:a,datasets:[{data:l,backgroundColor:a.map(e=>{var t;return null!=(t=r[e])?t:"#9ca3af"}),borderColor:"#1f2937",borderWidth:2}]};return(0,n.jsx)("div",{className:"max-w-sm mx-auto p-4 bg-gray-900 rounded-lg",children:(0,n.jsx)("div",{style:{height:300,width:300},children:(0,n.jsx)(f.nu,{data:o,options:{responsive:!0,maintainAspectRatio:!1,cutout:"70%",plugins:{legend:{position:"top",labels:{usePointStyle:!0,color:"#f3f4f6",font:{size:14,weight:"bold"}}},tooltip:{bodyColor:"#f9fafb",titleColor:"#f9fafb",backgroundColor:"#111827",borderColor:"#374151",borderWidth:1}}},plugins:[{id:"centerText",afterDraw(e){let{width:t}=e,{height:a}=e,n=e.ctx;n.save(),n.font="bold 16px sans-serif",n.fillStyle="#f3f4f6",n.textAlign="center",n.textBaseline="middle",n.fillText("₹".concat(s.toFixed(0)),t/2,a/2),n.restore()}}]})})})}function b(){let[e,t]=(0,l.useState)([]);async function a(){var e;let a=null==(e=o.j.currentUser)?void 0:e.uid;if(!a)return;let{from:n,to:l}=g();t(await (0,r.As)(a,n,l))}(0,l.useEffect)(()=>{a()},[]);let s=e.reduce((e,t)=>e+t.amount,0),i=new Date().getDate(),c=e.reduce((e,t)=>(e[t.category]=(e[t.category]||0)+t.amount,e),{});return(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsx)("h1",{className:"text-2xl font-semibold",children:"Dashboard"}),(0,n.jsx)(d,{onAdded:a}),(0,n.jsx)(m,{total:s,avgPerDay:s/Math.max(1,i),count:e.length}),(0,n.jsx)(y,{byCategory:c}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)("h2",{className:"text-lg font-semibold",children:"Recent expenses"}),(0,n.jsx)(p,{items:e,refresh:a})]})]})}v.t1.register(v.Bs,v.m_,v.s$)},8096:(e,t,a)=>{"use strict";a.d(t,{M:()=>i,db:()=>d,j:()=>o});var n=a(2078),l=a(9253),s=a(9708);let r=(0,n.Dk)().length?(0,n.Dk)()[0]:(0,n.Wp)({apiKey:"AIzaSyCP9zQB7IMsLVcNW2_SpCrX-5pSfIEEUlE",authDomain:"expense-tracker-2af0f.firebaseapp.com",projectId:"expense-tracker-2af0f",storageBucket:"expense-tracker-2af0f.appspot.com",messagingSenderId:"950177957556",appId:"1:950177957556:web:a50273b18fea4f043a79e1"}),o=(0,l.xI)(r),i=new l.HF,d=(0,s._A)(r,{localCache:(0,s.vK)({tabManager:(0,s.K7)()})})}},e=>{e.O(0,[992,838,647,477,541,441,255,358],()=>e(e.s=1307)),_N_E=e.O()}]);