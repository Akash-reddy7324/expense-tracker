{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/Projects/expense-tracker/lib/queries.ts"],"sourcesContent":["import { db } from \"@/firebase/client\";\r\nimport {\r\n  addDoc,\r\n  collection,\r\n  serverTimestamp,\r\n  query,\r\n  where,\r\n  orderBy,\r\n  getDocs,\r\n  deleteDoc,\r\n  doc,\r\n  updateDoc\r\n} from \"firebase/firestore\";\r\n\r\nexport type PaymentMethod = \"cash\" | \"upi\" | \"card\" | \"bank\" | \"other\";\r\n\r\nexport type Expense = {\r\n  id?: string;\r\n  userId: string;\r\n  date: string; // now stored as \"YYYY-MM-DD\"\r\n  amount: number;\r\n  category: string;\r\n  note?: string;\r\n  paymentMethod?: PaymentMethod;\r\n  createdAt?: any;\r\n  updatedAt?: any;\r\n};\r\n\r\n/**\r\n * Add a new expense\r\n * - Stores date as \"YYYY-MM-DD\" (no UTC conversion issues)\r\n * - Adds createdAt/updatedAt timestamps\r\n */\r\nexport async function addExpense(\r\n  uid: string,\r\n  data: Omit<Expense, \"userId\" | \"createdAt\" | \"updatedAt\" | \"id\">\r\n) {\r\n  const ref = await addDoc(collection(db, \"expenses\", uid, \"items\"), {\r\n    userId: uid,\r\n    ...data,\r\n    createdAt: serverTimestamp(),\r\n    updatedAt: serverTimestamp(),\r\n  });\r\n  return ref.id;\r\n}\r\n\r\n/**\r\n * Get expenses in a given date range\r\n * - fromDate and toDate should be \"YYYY-MM-DD\"\r\n */\r\nexport async function getExpensesInRange(\r\n  uid: string,\r\n  fromDate: string,\r\n  toDate: string\r\n) {\r\n  const q = query(\r\n    collection(db, \"expenses\", uid, \"items\"),\r\n    where(\"date\", \">=\", fromDate),\r\n    where(\"date\", \"<=\", toDate),\r\n    orderBy(\"date\", \"desc\")\r\n  );\r\n  const snap = await getDocs(q);\r\n  return snap.docs.map((d) => ({ id: d.id, ...(d.data() as Expense) }));\r\n}\r\n\r\n/**\r\n * Delete expense by id\r\n */\r\nexport async function deleteExpense(uid: string, id: string) {\r\n  await deleteDoc(doc(db, \"expenses\", uid, \"items\", id));\r\n}\r\n\r\n/**\r\n * Update expense (partial update)\r\n */\r\nexport async function updateExpense(\r\n  uid: string,\r\n  id: string,\r\n  patch: Partial<Expense>\r\n) {\r\n  await updateDoc(doc(db, \"expenses\", uid, \"items\", id), {\r\n    ...patch,\r\n    updatedAt: serverTimestamp(),\r\n  });\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;AAAA;AACA;AAAA;;;AAgCO,eAAe,WACpB,GAAW,EACX,IAAgE;IAEhE,MAAM,MAAM,MAAM,IAAA,gLAAM,EAAC,IAAA,oLAAU,EAAC,2HAAE,EAAE,YAAY,KAAK,UAAU;QACjE,QAAQ;QACR,GAAG,IAAI;QACP,WAAW,IAAA,yLAAe;QAC1B,WAAW,IAAA,yLAAe;IAC5B;IACA,OAAO,IAAI,EAAE;AACf;AAMO,eAAe,mBACpB,GAAW,EACX,QAAgB,EAChB,MAAc;IAEd,MAAM,IAAI,IAAA,+KAAK,EACb,IAAA,oLAAU,EAAC,2HAAE,EAAE,YAAY,KAAK,UAChC,IAAA,+KAAK,EAAC,QAAQ,MAAM,WACpB,IAAA,+KAAK,EAAC,QAAQ,MAAM,SACpB,IAAA,iLAAO,EAAC,QAAQ;IAElB,MAAM,OAAO,MAAM,IAAA,iLAAO,EAAC;IAC3B,OAAO,KAAK,IAAI,CAAC,GAAG,CAAC,CAAC,IAAM,CAAC;YAAE,IAAI,EAAE,EAAE;YAAE,GAAI,EAAE,IAAI,EAAE;QAAa,CAAC;AACrE;AAKO,eAAe,cAAc,GAAW,EAAE,EAAU;IACzD,MAAM,IAAA,mLAAS,EAAC,IAAA,6KAAG,EAAC,2HAAE,EAAE,YAAY,KAAK,SAAS;AACpD;AAKO,eAAe,cACpB,GAAW,EACX,EAAU,EACV,KAAuB;IAEvB,MAAM,IAAA,mLAAS,EAAC,IAAA,6KAAG,EAAC,2HAAE,EAAE,YAAY,KAAK,SAAS,KAAK;QACrD,GAAG,KAAK;QACR,WAAW,IAAA,yLAAe;IAC5B;AACF","debugId":null}},
    {"offset": {"line": 52, "column": 0}, "map": {"version":3,"sources":["file:///D:/Projects/expense-tracker/components/ExpenseForm.tsx"],"sourcesContent":["\"use client\";\r\nimport { useState } from \"react\";\r\nimport { z } from \"zod\";\r\nimport { addExpense, PaymentMethod } from \"@/lib/queries\";\r\nimport { auth } from \"@/firebase/client\";\r\n\r\n// Schema expects date-only string\r\nconst schema = z.object({\r\n  date: z.string().min(1), // \"YYYY-MM-DD\"\r\n  amount: z.coerce.number().positive(),\r\n  category: z.string().min(1),\r\n  note: z.string().optional(),\r\n  paymentMethod: z.enum([\"cash\", \"upi\", \"card\", \"bank\", \"other\"]).optional(),\r\n});\r\n\r\nexport default function ExpenseForm({ onAdded }: { onAdded?: () => void }) {\r\n  const [form, setForm] = useState({\r\n    date: new Date().toISOString().slice(0, 10), // default today\r\n    amount: \"\",\r\n    category: \"Food\",\r\n    note: \"\",\r\n    paymentMethod: \"upi\" as PaymentMethod,\r\n  });\r\n  const [busy, setBusy] = useState(false);\r\n  const uid = auth.currentUser?.uid;\r\n\r\n  async function submit(e: React.FormEvent) {\r\n    e.preventDefault();\r\n    const parsed = schema.safeParse({ ...form, amount: Number(form.amount) });\r\n    if (!parsed.success || !uid) {\r\n      return alert(\"Check inputs or login again.\");\r\n    }\r\n    setBusy(true);\r\n    try {\r\n      await addExpense(uid, parsed.data);\r\n      setForm({ ...form, amount: \"\", note: \"\" }); // reset inputs\r\n      onAdded?.(); // refresh list\r\n    } finally {\r\n      setBusy(false);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <form onSubmit={submit} className=\"grid gap-3 md:grid-cols-5\">\r\n      <input\r\n        type=\"date\"\r\n        value={form.date}\r\n        onChange={(e) => setForm((s) => ({ ...s, date: e.target.value }))}\r\n      />\r\n      <input\r\n        inputMode=\"decimal\"\r\n        placeholder=\"Amount\"\r\n        value={form.amount}\r\n        onChange={(e) => setForm((s) => ({ ...s, amount: e.target.value }))}\r\n      />\r\n      <select\r\n        value={form.category}\r\n        onChange={(e) => setForm((s) => ({ ...s, category: e.target.value }))}\r\n      >\r\n        {[\"Food\", \"Travel\", \"Shopping\", \"Bills\", \"Health\", \"Entertainment\", \"Education\", \"Other\"].map((c) => (\r\n          <option key={c} value={c}>{c}</option>\r\n        ))}\r\n      </select>\r\n      <input\r\n        placeholder=\"Note\"\r\n        value={form.note}\r\n        onChange={(e) => setForm((s) => ({ ...s, note: e.target.value }))}\r\n      />\r\n      <select\r\n        value={form.paymentMethod}\r\n        onChange={(e) => setForm((s) => ({ ...s, paymentMethod: e.target.value as PaymentMethod }))}\r\n      >\r\n        {[\"cash\", \"upi\", \"card\", \"bank\", \"other\"].map((p) => (\r\n          <option key={p} value={p}>{p}</option>\r\n        ))}\r\n      </select>\r\n      <button disabled={busy} className=\"btn-primary md:col-span-5\">\r\n        {busy ? \"Saving…\" : \"Add Expense\"}\r\n      </button>\r\n    </form>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 238, "column": 0}, "map": {"version":3,"sources":["file:///D:/Projects/expense-tracker/components/ExpenseList.tsx"],"sourcesContent":["\"use client\";\r\nimport { useState } from \"react\";\r\nimport { deleteExpense, updateExpense, Expense, PaymentMethod } from \"@/lib/queries\";\r\nimport { auth } from \"@/firebase/client\";\r\nimport { parseISO, format } from \"date-fns\";\r\n\r\nexport default function ExpenseList({ items, refresh }: { items: Expense[]; refresh: () => void }) {\r\n  const uid = auth.currentUser?.uid;\r\n  const [editingId, setEditingId] = useState<string | null>(null);\r\n  const [editForm, setEditForm] = useState<Partial<Expense>>({});\r\n\r\n  if (!uid) {\r\n    return <p className=\"p-3 text-red-400\">Please login to see expenses.</p>;\r\n  }\r\n\r\n  return (\r\n    <ul className=\"space-y-3\">\r\n      {items.map((e) => {\r\n        const isEditing = editingId === e.id;\r\n\r\n        return (\r\n          <li key={e.id} className=\"card\">\r\n            {isEditing ? (\r\n              // --- EDIT FORM ---\r\n              <form\r\n                onSubmit={async (ev) => {\r\n                  ev.preventDefault();\r\n                  try {\r\n                    await updateExpense(uid, e.id!, editForm);\r\n                    setEditingId(null);\r\n                    setEditForm({});\r\n                    refresh();\r\n                  } catch (err) {\r\n                    alert(\"Failed to update expense: \" + (err as Error).message);\r\n                  }\r\n                }}\r\n                className=\"flex flex-col md:flex-row gap-2 w-full\"\r\n              >\r\n                <input\r\n                  type=\"date\"\r\n                  value={editForm.date ?? e.date}\r\n                  onChange={(ev) => setEditForm((f) => ({ ...f, date: ev.target.value }))}\r\n                />\r\n                <input\r\n                  type=\"number\"\r\n                  value={editForm.amount ?? e.amount}\r\n                  onChange={(ev) => setEditForm((f) => ({ ...f, amount: Number(ev.target.value) }))}\r\n                />\r\n                <select\r\n                  value={editForm.category ?? e.category}\r\n                  onChange={(ev) => setEditForm((f) => ({ ...f, category: ev.target.value }))}\r\n                >\r\n                  {[\"Food\",\"Travel\",\"Shopping\",\"Bills\",\"Health\",\"Entertainment\",\"Education\",\"Other\"].map(c => (\r\n                    <option key={c} value={c}>{c}</option>\r\n                  ))}\r\n                </select>\r\n                <input\r\n                  type=\"text\"\r\n                  placeholder=\"Note\"\r\n                  value={editForm.note ?? e.note ?? \"\"}\r\n                  onChange={(ev) => setEditForm((f) => ({ ...f, note: ev.target.value }))}\r\n                />\r\n                <select\r\n                  value={editForm.paymentMethod ?? e.paymentMethod ?? \"cash\"}\r\n                  onChange={(ev) => setEditForm((f) => ({ ...f, paymentMethod: ev.target.value as PaymentMethod }))}\r\n                >\r\n                  {[\"cash\",\"upi\",\"card\",\"bank\",\"other\"].map(p => (\r\n                    <option key={p} value={p}>{p}</option>\r\n                  ))}\r\n                </select>\r\n\r\n                <div className=\"flex gap-2\">\r\n                  <button type=\"submit\" className=\"btn-primary px-3 py-1\">Save</button>\r\n                  <button type=\"button\" onClick={() => setEditingId(null)} className=\"btn-secondary px-3 py-1\">Cancel</button>\r\n                </div>\r\n              </form>\r\n            ) : (\r\n              // --- READ MODE ---\r\n              <div className=\"flex items-center justify-between w-full\">\r\n                <div>\r\n                  <div className=\"font-medium text-white\">₹{e.amount.toFixed(2)} — {e.category}</div>\r\n                  <div className=\"text-gray-400 text-xs\">\r\n                    {format(parseISO(e.date), \"dd MMM yyyy\")} · {e.note || \"—\"} · {e.paymentMethod || \"—\"}\r\n                  </div>\r\n                </div>\r\n                <div className=\"flex gap-3\">\r\n                  <button\r\n                    onClick={() => {\r\n                      setEditingId(e.id!);\r\n                      setEditForm(e); // preload form with existing values\r\n                    }}\r\n                    className=\"text-blue-400 hover:underline\"\r\n                  >\r\n                    Edit\r\n                  </button>\r\n                  <button\r\n                    onClick={async () => {\r\n                      try {\r\n                        await deleteExpense(uid, e.id!);\r\n                        refresh();\r\n                      } catch (err) {\r\n                        alert(\"Failed to delete expense: \" + (err as Error).message);\r\n                      }\r\n                    }}\r\n                    className=\"text-red-400 hover:underline\"\r\n                  >\r\n                    Delete\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            )}\r\n          </li>\r\n        );\r\n      })}\r\n      {items.length === 0 && <li className=\"text-gray-500\">No expenses yet.</li>}\r\n    </ul>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 532, "column": 0}, "map": {"version":3,"sources":["file:///D:/Projects/expense-tracker/components/StatsCards.tsx"],"sourcesContent":["export default function StatsCards({ total, avgPerDay, count }: { total: number; avgPerDay: number; count: number }) {\r\n  const items = [\r\n    { label: \"This Month\", value: `₹${total.toFixed(2)}` },\r\n    { label: \"Avg / Day\", value: `₹${avgPerDay.toFixed(2)}` },\r\n    { label: \"Entries\", value: `${count}` },\r\n  ];\r\n\r\n  return (\r\n    <div className=\"grid grid-cols-1 sm:grid-cols-3 gap-4\">\r\n      {items.map((x) => (\r\n        <div key={x.label} className=\"card text-center\">\r\n          <div className=\"text-sm text-gray-400\">{x.label}</div>\r\n          <div className=\"text-2xl font-bold text-white mt-1\">{x.value}</div>\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;;AAAe,SAAS,WAAW,KAAgF;QAAhF,EAAE,KAAK,EAAE,SAAS,EAAE,KAAK,EAAuD,GAAhF;IACjC,MAAM,QAAQ;QACZ;YAAE,OAAO;YAAc,OAAO,AAAC,IAAoB,OAAjB,MAAM,OAAO,CAAC;QAAK;QACrD;YAAE,OAAO;YAAa,OAAO,AAAC,IAAwB,OAArB,UAAU,OAAO,CAAC;QAAK;QACxD;YAAE,OAAO;YAAW,OAAO,AAAC,GAAQ,OAAN;QAAQ;KACvC;IAED,qBACE,6LAAC;QAAI,WAAU;kBACZ,MAAM,GAAG,CAAC,CAAC,kBACV,6LAAC;gBAAkB,WAAU;;kCAC3B,6LAAC;wBAAI,WAAU;kCAAyB,EAAE,KAAK;;;;;;kCAC/C,6LAAC;wBAAI,WAAU;kCAAsC,EAAE,KAAK;;;;;;;eAFpD,EAAE,KAAK;;;;;;;;;;AAOzB;KAjBwB","debugId":null}},
    {"offset": {"line": 597, "column": 0}, "map": {"version":3,"sources":["file:///D:/Projects/expense-tracker/lib/date.ts"],"sourcesContent":["import { startOfMonth, endOfMonth, format } from \"date-fns\";\r\n\r\n/**\r\n * Returns the start and end dates of the given month\r\n * formatted as \"YYYY-MM-DD\" (date-only, no time).\r\n */\r\nexport const monthRangeDateOnly = (d = new Date()) => ({\r\n  from: format(startOfMonth(d), \"yyyy-MM-dd\"), // e.g. \"2025-08-01\"\r\n  to: format(endOfMonth(d), \"yyyy-MM-dd\"),     // e.g. \"2025-08-31\"\r\n});\r\n"],"names":[],"mappings":";;;;AAAA;AAAA;AAAA;;AAMO,MAAM,qBAAqB;QAAC,qEAAI,IAAI;WAAY;QACrD,MAAM,IAAA,mKAAM,EAAC,IAAA,+JAAY,EAAC,IAAI;QAC9B,IAAI,IAAA,mKAAM,EAAC,IAAA,2JAAU,EAAC,IAAI;IAC5B","debugId":null}},
    {"offset": {"line": 619, "column": 0}, "map": {"version":3,"sources":["file:///D:/Projects/expense-tracker/components/charts/CategoryDonut.tsx"],"sourcesContent":["\"use client\";\r\nimport { Doughnut } from \"react-chartjs-2\";\r\nimport { Chart as ChartJS, ArcElement, Tooltip, Legend } from \"chart.js\";\r\n\r\nChartJS.register(ArcElement, Tooltip, Legend);\r\n\r\nexport default function CategoryDonut({ byCategory }: { byCategory: Record<string, number> }) {\r\n  const labels = Object.keys(byCategory);\r\n  const values = Object.values(byCategory);\r\n\r\n  const palette = {\r\n    Food: \"#d62728\",          // red\r\n    Travel: \"#1f77b4\",        // blue\r\n    Shopping: \"#ff7f0e\",      // orange\r\n    Bills: \"#2ca02c\",         // green\r\n    Health: \"#9467bd\",        // purple\r\n    Entertainment: \"#17becf\", // teal\r\n    Education: \"#bcbd22\",     // olive\r\n    Other: \"#7f7f7f\",         // gray\r\n  };\r\n\r\n  const data = {\r\n    labels,\r\n    datasets: [\r\n      {\r\n        data: values,\r\n        backgroundColor: labels.map((l) => palette[l] || \"#9ca3af\"),\r\n        borderColor: \"#1f2937\", // gray-800 border to blend with dark bg\r\n        borderWidth: 2,\r\n      },\r\n    ],\r\n  };\r\n\r\n  const options = {\r\n    responsive: true,\r\n    maintainAspectRatio: false,\r\n    cutout: \"70%\",\r\n    plugins: {\r\n      legend: {\r\n        position: \"top\" as const,\r\n        labels: {\r\n          usePointStyle: true,\r\n          color: \"#f3f4f6\", // light gray (gray-100)\r\n          font: {\r\n            size: 14,\r\n            weight: \"500\",\r\n          },\r\n        },\r\n      },\r\n      tooltip: {\r\n        bodyColor: \"#f9fafb\", // white text\r\n        titleColor: \"#f9fafb\", // white title\r\n        backgroundColor: \"#111827\", // dark tooltip bg\r\n        borderColor: \"#374151\", // gray-700 border\r\n        borderWidth: 1,\r\n      },\r\n    },\r\n  };\r\n\r\n  return (\r\n    <div className=\"max-w-sm mx-auto p-4 bg-gray-900 rounded-lg\">\r\n      <div style={{ height: 300, width: 300 }}>\r\n        <Doughnut data={data} options={options} />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AACA;AACA;AAFA;;;;AAIA,wKAAO,CAAC,QAAQ,CAAC,6KAAU,EAAE,0KAAO,EAAE,yKAAM;AAE7B,SAAS,cAAc,KAAsD;QAAtD,EAAE,UAAU,EAA0C,GAAtD;IACpC,MAAM,SAAS,OAAO,IAAI,CAAC;IAC3B,MAAM,SAAS,OAAO,MAAM,CAAC;IAE7B,MAAM,UAAU;QACd,MAAM;QACN,QAAQ;QACR,UAAU;QACV,OAAO;QACP,QAAQ;QACR,eAAe;QACf,WAAW;QACX,OAAO;IACT;IAEA,MAAM,OAAO;QACX;QACA,UAAU;YACR;gBACE,MAAM;gBACN,iBAAiB,OAAO,GAAG,CAAC,CAAC,IAAM,OAAO,CAAC,EAAE,IAAI;gBACjD,aAAa;gBACb,aAAa;YACf;SACD;IACH;IAEA,MAAM,UAAU;QACd,YAAY;QACZ,qBAAqB;QACrB,QAAQ;QACR,SAAS;YACP,QAAQ;gBACN,UAAU;gBACV,QAAQ;oBACN,eAAe;oBACf,OAAO;oBACP,MAAM;wBACJ,MAAM;wBACN,QAAQ;oBACV;gBACF;YACF;YACA,SAAS;gBACP,WAAW;gBACX,YAAY;gBACZ,iBAAiB;gBACjB,aAAa;gBACb,aAAa;YACf;QACF;IACF;IAEA,qBACE,6LAAC;QAAI,WAAU;kBACb,cAAA,6LAAC;YAAI,OAAO;gBAAE,QAAQ;gBAAK,OAAO;YAAI;sBACpC,cAAA,6LAAC,qKAAQ;gBAAC,MAAM;gBAAM,SAAS;;;;;;;;;;;;;;;;AAIvC;KA5DwB","debugId":null}},
    {"offset": {"line": 717, "column": 0}, "map": {"version":3,"sources":["file:///D:/Projects/expense-tracker/app/%28app%29/dashboard/page.tsx"],"sourcesContent":["\"use client\";\r\nimport ExpenseForm from \"@/components/ExpenseForm\";\r\nimport ExpenseList from \"@/components/ExpenseList\";\r\nimport StatsCards from \"@/components/StatsCards\";\r\nimport { monthRangeDateOnly } from \"@/lib/date\";  // ✅ FIXED\r\nimport { getExpensesInRange, Expense } from \"@/lib/queries\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { auth } from \"@/firebase/client\";\r\nimport CategoryDonut from \"@/components/charts/CategoryDonut\";\r\n\r\nexport default function DashboardPage() {\r\n  const [items, setItems] = useState<Expense[]>([]);\r\n\r\n  async function refresh() {\r\n    const uid = auth.currentUser?.uid;\r\n    if (!uid) return;\r\n\r\n    const { from, to } = monthRangeDateOnly(); // ✅ FIXED\r\n    const data = await getExpensesInRange(uid, from, to);\r\n    setItems(data);\r\n  }\r\n\r\n  useEffect(() => {\r\n    refresh();\r\n  }, []);\r\n\r\n  const total = items.reduce((s, i) => s + i.amount, 0);\r\n  const days = new Date().getDate();\r\n  const byCategory = items.reduce<Record<string, number>>(\r\n    (acc, i) => ((acc[i.category] = (acc[i.category] || 0) + i.amount), acc),\r\n    {}\r\n  );\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <h1 className=\"text-2xl font-semibold\">Dashboard</h1>\r\n      <ExpenseForm onAdded={refresh} />\r\n      <StatsCards total={total} avgPerDay={total / Math.max(1, days)} count={items.length} />\r\n      <CategoryDonut byCategory={byCategory} />\r\n      <div className=\"space-y-2\">\r\n        <h2 className=\"text-lg font-semibold\">Recent expenses</h2>\r\n        <ExpenseList items={items} refresh={refresh} />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AACA;AACA;AACA;AACA,iMAAkD,UAAU;AAC5D;AACA;AACA;AACA;;;AARA;;;;;;;;;AAUe,SAAS;;IACtB,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,yKAAQ,EAAY,EAAE;IAEhD,eAAe;YACD;QAAZ,MAAM,OAAM,oBAAA,6HAAI,CAAC,WAAW,cAAhB,wCAAA,kBAAkB,GAAG;QACjC,IAAI,CAAC,KAAK;QAEV,MAAM,EAAE,IAAI,EAAE,EAAE,EAAE,GAAG,IAAA,oIAAkB,KAAI,UAAU;QACrD,MAAM,OAAO,MAAM,IAAA,uIAAkB,EAAC,KAAK,MAAM;QACjD,SAAS;IACX;IAEA,IAAA,0KAAS;mCAAC;YACR;QACF;kCAAG,EAAE;IAEL,MAAM,QAAQ,MAAM,MAAM,CAAC,CAAC,GAAG,IAAM,IAAI,EAAE,MAAM,EAAE;IACnD,MAAM,OAAO,IAAI,OAAO,OAAO;IAC/B,MAAM,aAAa,MAAM,MAAM,CAC7B,CAAC,KAAK,IAAM,CAAC,AAAC,GAAG,CAAC,EAAE,QAAQ,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE,QAAQ,CAAC,IAAI,CAAC,IAAI,EAAE,MAAM,EAAG,GAAG,GACvE,CAAC;IAGH,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAG,WAAU;0BAAyB;;;;;;0BACvC,6LAAC,wIAAW;gBAAC,SAAS;;;;;;0BACtB,6LAAC,uIAAU;gBAAC,OAAO;gBAAO,WAAW,QAAQ,KAAK,GAAG,CAAC,GAAG;gBAAO,OAAO,MAAM,MAAM;;;;;;0BACnF,6LAAC,oJAAa;gBAAC,YAAY;;;;;;0BAC3B,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAG,WAAU;kCAAwB;;;;;;kCACtC,6LAAC,wIAAW;wBAAC,OAAO;wBAAO,SAAS;;;;;;;;;;;;;;;;;;AAI5C;GAnCwB;KAAA","debugId":null}}]
}